#--MCCE_to_NAMD_Chun_ver Wiki

This document describes the Module "MCCE_to_NAMD_Chun_ver" and an examplary test case.


##--Module: MCCE_to_NAMD_Chun_ver

The module "MCCE_to_NAMD_Chun_ver" provides submodules and related python objects to perform MCCE calculations, and later utilize the results to prepare NAMD-based molecular dynamics (MD) simulations.

The 2 submodules under "MCCE_to_NAMD_Chun_ver" and their respective classes are:
1) Submodule 1: MCCE_to_NAMD
  Classes:
    (i)    PDBtoMSAna
    (ii)   AggMCCEResults
    (iii)  MSAnaToNAMD
2) Submodule 2: Vis_MCCE_on_VMD
  Classes:
    (i)    Vis_MCCE_on_VMD


##--Case study/example

The 1st submodule and its classes are for calling MCCE calculations and utilize the results to prepare MD simulations. The examplary codes to perform such calculations at pH 7 for a case study on a lysozyme (PDB ID: 4lzt) are provided under the test case of MCCE as "test_MCCE_to_NAMD_Chun_ver/4lzt/test_run_demo.sh". Users can simply execute the following command for a test run:

Command: bash test_run_demo.sh

Inside "test_run_demo.sh", there are commented examplary codes on sourcing conda virtual environment before the test run. Users are encouraged to have their environment if the machine to run the codes lack certain packages.


##--Explanation

In "test_run_demo.sh", there are 3 lines of commands. They are
  (1) source step1_mcce_to_namd_Chun.sh
  (2) source step2_mcce_to_namd_Chun.sh
  (3) source step3_mcce_to_namd_Chun.sh

Command 1 executes 2 rounds of MCCE calculations at pH 7 for our input protein (PDB ID 4lzt), which is deposited under the dierctory "test_MCCE_to_NAMD_Chun_ver/4lzt. The outputs of the nth round of calculations are deposited at "test_MCCE_to_NAMD_Chun_ver/4lzt_n". Users are encouraged to modiy parameters in "step1_mcce_to_namd_Chun.sh" to adjust their runs.

After executing command 1, command 2 is executed. It gathers results generated by command 1 to perform a microstate analysis. The results of the microstate analysis are converted into N scripts, where N (default to be 5) is a user-specific paramter and stands for the top N thermodynamically ost probable microstates sampled by MCCE.

As an example, a choice of N = 3 will allow users to access the top 3 thermodynamically most probable microstates sampled. Then, for each of these selected microstate and for each round of MCCE calculations, a script that provides codes to prepare NAMD-based MD-ready structures through VMD will be generated.

For the case of N = 3, the resulting VMD scripts are named as:
  (i)   MCCE_case_0_mcce_to_namd.tcl
  (ii)  MCCE_case_1_mcce_to_namd.tcl
  (iii) MCCE_case_2_mcce_to_namd.tcl

If users have VMD installed on their work place, a MD-ready structure (segmented PDB & PSF) can be generated by entering the following command in CLI:

Command: vmd -dispdev text < MCCE_case_0_mcce_to_namd.tcl

where case 0 (the most thermodynamically probable microstate) is used as an example here.

Command 3 uses the 2nd submodule and its class to convert results produced from command 1 & 2 into visualizable features on VMD.

Currently, 4 visualization options are available. Thus, for each round of MCCE calculations, 4 VMD scripts will be generated. They are:
  (i)   vis_option_1.tcl
  (ii)  vis_option_2.tcl
  (iii) vis_option_3.tcl
  (iv)  vis_option_4.tcl

The meaning and representations for these scripts are output to the screen when executing "step3_mcce_to_namd_Chun.sh". For the nth round of MCCE calculation, the corresponding VMD scripts are genrated under "test_MCCE_to_NAMD_Chun_ver/4lzt_n".

